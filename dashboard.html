<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ - Ú¯Ø±ÙˆÙ‡Ø§Ù† Ø´Ù‡ÛŒØ¯ ØªÙˆÚ©Ù„ÛŒ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ */
        .dashboard-welcome {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-welcome h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .quick-access {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .quick-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .quick-card:hover {
            transform: translateY(-10px);
            border-color: #3498db;
            box-shadow: 0 15px 40px rgba(52, 152, 219, 0.2);
        }
        
        .quick-card i {
            font-size: 40px;
            margin-bottom: 15px;
            color: #3498db;
        }
        
        .logout-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            padding: 12px 25px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ù‡Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
        <header class="dashboard-welcome">
            <h1 id="welcomeTitle">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</h1>
            <p id="welcomeSubtitle">Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ú¯Ø±ÙˆÙ‡Ø§Ù† Ø´Ù‡ÛŒØ¯ ØªÙˆÚ©Ù„ÛŒ</p>
        </header>
        
        <!-- Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ -->
        <section class="quick-access">
            <div class="quick-card" onclick="navigateTo('ration.html')">
                <i class="fas fa-chart-bar"></i>
                <h3>Ø¢Ù…Ø§Ø± Ø¬ÛŒØ±Ù‡</h3>
                <p>Ø«Ø¨Øª Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù…Ø§Ø± Ø¬ÛŒØ±Ù‡ Ù‡ÙØªÚ¯ÛŒ</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('news.html')">
                <i class="fas fa-bullhorn"></i>
                <h3>Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ</h3>
                <p>Ø§Ø®Ø¨Ø§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('chat.html')">
                <i class="fas fa-comments"></i>
                <h3>Ú†Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h3>
                <p>Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø§ÛŒØ± Ø§Ø¹Ø¶Ø§ÛŒ Ú¯Ø±ÙˆÙ‡Ø§Ù†</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('top-users.html')">
                <i class="fas fa-trophy"></i>
                <h3>Ù†ÙØ±Ø§Øª Ø¨Ø±ØªØ±</h3>
                <p>Ø¨Ø±ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ø± Ø±Ø´ØªÙ‡ Ùˆ ÙØ¹Ø§Ù„ÛŒØª</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('dorms.html')">
                <i class="fas fa-home"></i>
                <h3>Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡â€ŒÙ‡Ø§</h3>
                <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡ Ùˆ Ù‡Ù…â€ŒØ§ØªØ§Ù‚ÛŒâ€ŒÙ‡Ø§</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('events.html')">
                <i class="fas fa-calendar-alt"></i>
                <h3>Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§</h3>
                <p>Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡Ø§Ù†</p>
            </div>
            
            <div class="quick-card" onclick="navigateTo('profile.html')">
                <i class="fas fa-user-cog"></i>
                <h3>Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h3>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒ</p>
            </div>
            
            <div class="quick-card" id="adminSection" style="display: none;" onclick="navigateTo('admin.html')">
                <i class="fas fa-cogs"></i>
                <h3>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…</p>
            </div>
        </section>
        
        <!-- Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬ -->
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
        </button>
    </div>

    <script>
        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ====================
        document.addEventListener('DOMContentLoaded', function() {
            console.log("ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯");
            
            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!currentUser) {
                console.log("ğŸš« Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡ØŒ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯");
                window.location.href = 'index.html';
                return;
            }
            
            console.log("ğŸ‘¤ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡:", currentUser);
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¹Ù†ÙˆØ§Ù† ØµÙØ­Ù‡
            document.getElementById('welcomeTitle').textContent = `Ø³Ù„Ø§Ù…ØŒ ${currentUser.fullName} ğŸ‘‹`;
            document.getElementById('welcomeSubtitle').textContent = `Ø§Ù…Ø±ÙˆØ² ${getPersianDate()} Ø§Ø³Øª`;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù†
            if (currentUser.role === 'admin' || currentUser.role === 'secretary') {
                document.getElementById('adminSection').style.display = 'block';
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
            function getPersianDate() {
                const today = new Date();
                const options = { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    weekday: 'long'
                };
                return today.toLocaleDateString('fa-IR', options);
            }
        });
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ ====================
        function navigateTo(page) {
            console.log("ğŸ”„ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡:", page);
            window.location.href = page;
        }
        
        function logout() {
            if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                localStorage.setItem('currentUser', JSON.stringify(null));
                window.location.href = 'index.html';
            }
        }
        
        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ ====================
        window.addEventListener('error', function(e) {
            console.error('âŒ Ø®Ø·Ø§:', e.error);
        });
    </script>
</body>
</html>